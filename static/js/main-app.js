var Se=Object.defineProperty;var Me=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Y=(e,t,n)=>Me(e,typeof t!="symbol"?t+"":t,n);function L(){}const Ce=e=>e;function we(e){return e()}function se(){return Object.create(null)}function A(e){e.forEach(we)}function le(e){return typeof e=="function"}function Ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function We(e){return Object.keys(e).length===0}const ve=typeof window<"u";let xe=ve?()=>window.performance.now():()=>Date.now(),ie=ve?e=>requestAnimationFrame(e):L;const B=new Set;function ye(e){B.forEach(t=>{t.c(e)||(B.delete(t),t.f())}),B.size!==0&&ie(ye)}function ze(e){let t;return B.size===0&&ie(ye),{promise:new Promise(n=>{B.add(t={c:e,f:n})}),abort(){B.delete(t)}}}function y(e,t){e.appendChild(t)}function $e(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ne(e){const t=$("style");return t.textContent="/* empty */",Oe($e(e),t),t.sheet}function Oe(e,t){return y(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function Ae(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function F(e){return document.createTextNode(e)}function z(){return F(" ")}function H(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Fe(e){return Array.from(e.childNodes)}function P(e,t){t=""+t,e.data!==t&&(e.data=t)}function Z(e,t){e.value=t??""}function re(e,t,n){for(let i=0;i<e.options.length;i+=1){const f=e.options[i];if(f.__value===t){f.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Le(e){const t=e.querySelector(":checked");return t&&t.__value}function j(e,t,n){e.classList.toggle(t,!!n)}function je(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}const K=new Map;let Q=0;function De(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Re(e,t){const n={stylesheet:Ne(t),rules:{}};return K.set(e,n),n}function ae(e,t,n,i,f,r,u,l=0){const o=16.666/i;let s=`{
`;for(let g=0;g<=1;g+=o){const w=t+(n-t)*r(g);s+=g*100+`%{${u(w,1-w)}}
`}const a=s+`100% {${u(n,1-n)}}
}`,p=`__svelte_${De(a)}_${l}`,m=$e(e),{stylesheet:v,rules:d}=K.get(m)||Re(m,e);d[p]||(d[p]=!0,v.insertRule(`@keyframes ${p} ${a}`,v.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${p} ${i}ms linear ${f}ms 1 both`,Q+=1,p}function Be(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),f=n.length-i.length;f&&(e.style.animation=i.join(", "),Q-=f,Q||Ie())}function Ie(){ie(()=>{Q||(K.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&W(t)}),K.clear())})}let J;function U(e){J=e}function Pe(){if(!J)throw new Error("Function called outside component initialization");return J}function Te(e){Pe().$$.on_mount.push(e)}const R=[],ce=[];let I=[];const ue=[],qe=Promise.resolve();let ne=!1;function He(){ne||(ne=!0,qe.then(be))}function T(e){I.push(e)}const ee=new Set;let D=0;function be(){if(D!==0)return;const e=J;do{try{for(;D<R.length;){const t=R[D];D++,U(t),Ue(t.$$)}}catch(t){throw R.length=0,D=0,t}for(U(null),R.length=0,D=0;ce.length;)ce.pop()();for(let t=0;t<I.length;t+=1){const n=I[t];ee.has(n)||(ee.add(n),n())}I.length=0}while(R.length);for(;ue.length;)ue.pop()();ne=!1,ee.clear(),U(e)}function Ue(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}function Je(e){const t=[],n=[];I.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),I=t}let q;function Ve(){return q||(q=Promise.resolve(),q.then(()=>{q=null})),q}function te(e,t,n){e.dispatchEvent(je(`${t?"intro":"outro"}${n}`))}const G=new Set;let O;function Ge(){O={r:0,c:[],p:O}}function Ke(){O.r||A(O.c),O=O.p}function oe(e,t){e&&e.i&&(G.delete(e),e.i(t))}function ke(e,t,n,i){if(e&&e.o){if(G.has(e))return;G.add(e),O.c.push(()=>{G.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Qe={duration:0};function fe(e,t,n,i){let r=t(e,n,{direction:"both"}),u=i?0:1,l=null,o=null,s=null,a;function p(){s&&Be(e,s)}function m(d,_){const g=d.b-u;return _*=Math.abs(g),{a:u,b:d.b,d:g,duration:_,start:d.start,end:d.start+_,group:d.group}}function v(d){const{delay:_=0,duration:g=300,easing:w=Ce,tick:E=L,css:x}=r||Qe,S={start:xe()+_,b:d};d||(S.group=O,O.r+=1),"inert"in e&&(d?a!==void 0&&(e.inert=a):(a=e.inert,e.inert=!0)),l||o?o=S:(x&&(p(),s=ae(e,u,d,g,_,w,x)),d&&E(0,1),l=m(S,g),T(()=>te(e,d,"start")),ze(k=>{if(o&&k>o.start&&(l=m(o,g),o=null,te(e,l.b,"start"),x&&(p(),s=ae(e,u,l.b,l.duration,0,w,r.css))),l){if(k>=l.end)E(u=l.b,1-u),te(e,l.b,"end"),o||(l.b?p():--l.group.r||A(l.group.c)),l=null;else if(k>=l.start){const b=k-l.start;u=l.a+l.d*w(b/l.duration),E(u,1-u)}}return!!(l||o)}))}return{run(d){le(r)?Ve().then(()=>{r=r({direction:d?"in":"out"}),v(d)}):v(d)},end(){p(),l=o=null}}}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Xe(e,t){ke(e,1,1,()=>{t.delete(e.key)})}function Ye(e,t,n,i,f,r,u,l,o,s,a,p){let m=e.length,v=r.length,d=m;const _={};for(;d--;)_[e[d].key]=d;const g=[],w=new Map,E=new Map,x=[];for(d=v;d--;){const c=p(f,r,d),h=n(c);let C=u.get(h);C?x.push(()=>C.p(c,t)):(C=s(h,c),C.c()),w.set(h,g[d]=C),h in _&&E.set(h,Math.abs(d-_[h]))}const S=new Set,k=new Set;function b(c){oe(c,1),c.m(l,a),u.set(c.key,c),a=c.first,v--}for(;m&&v;){const c=g[v-1],h=e[m-1],C=c.key,V=h.key;c===h?(a=c.first,m--,v--):w.has(V)?!u.has(C)||S.has(C)?b(c):k.has(V)?m--:E.get(C)>E.get(V)?(k.add(C),b(c)):(S.add(V),m--):(o(h,u),m--)}for(;m--;){const c=e[m];w.has(c.key)||o(c,u)}for(;v;)b(g[v-1]);return A(x),g}function Ze(e,t,n){const{fragment:i,after_update:f}=e.$$;i&&i.m(t,n),T(()=>{const r=e.$$.on_mount.map(we).filter(le);e.$$.on_destroy?e.$$.on_destroy.push(...r):A(r),e.$$.on_mount=[]}),f.forEach(T)}function et(e,t){const n=e.$$;n.fragment!==null&&(Je(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(R.push(e),He(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,i,f,r,u=null,l=[-1]){const o=J;U(e);const s=e.$$={fragment:null,ctx:[],props:r,update:L,not_equal:f,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:se(),dirty:l,skip_bound:!1,root:t.target||o.$$.root};u&&u(s.root);let a=!1;if(s.ctx=n?n(e,t.props||{},(p,m,...v)=>{const d=v.length?v[0]:m;return s.ctx&&f(s.ctx[p],s.ctx[p]=d)&&(!s.skip_bound&&s.bound[p]&&s.bound[p](d),a&&tt(e,p)),m}):[],s.update(),a=!0,A(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const p=Fe(t.target);s.fragment&&s.fragment.l(p),p.forEach(W)}else s.fragment&&s.fragment.c();t.intro&&oe(e.$$.fragment),Ze(e,t.target,t.anchor),be()}U(o)}class lt{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){et(this,1),this.$destroy=L}$on(t,n){if(!le(n))return L;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const f=i.indexOf(n);f!==-1&&i.splice(f,1)}}$set(t){this.$$set&&!We(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const it="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(it);function ot(e){const t=e-1;return t*t*t+1}function de(e,{delay:t=0,duration:n=400,easing:i=ot,axis:f="y"}={}){const r=getComputedStyle(e),u=+r.opacity,l=f==="y"?"height":"width",o=parseFloat(r[l]),s=f==="y"?["top","bottom"]:["left","right"],a=s.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),p=parseFloat(r[`padding${a[0]}`]),m=parseFloat(r[`padding${a[1]}`]),v=parseFloat(r[`margin${a[0]}`]),d=parseFloat(r[`margin${a[1]}`]),_=parseFloat(r[`border${a[0]}Width`]),g=parseFloat(r[`border${a[1]}Width`]);return{delay:t,duration:n,easing:i,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*u};${l}: ${w*o}px;padding-${s[0]}: ${w*p}px;padding-${s[1]}: ${w*m}px;margin-${s[0]}: ${w*v}px;margin-${s[1]}: ${w*d}px;border-${s[0]}-width: ${w*_}px;border-${s[1]}-width: ${w*g}px;`}}function he(e,t,n){const i=e.slice();return i[13]=t[n],i}function pe(e,t,n){const i=e.slice();return i[16]=t[n],i}function _e(e){let t;return{c(){t=$("span"),t.textContent="Пока нет активных событий",M(t,"class","empty")},m(n,i){N(n,t,i)},p:L,d(n){n&&W(t)}}}function st(e){let t,n,i=new Date(e[13].time).toLocaleString()+"",f;function r(o,s){return o[13].data.login===void 0?ct:at}let u=r(e),l=u(e);return{c(){l.c(),t=z(),n=$("div"),f=F(i),M(n,"class","ceated")},m(o,s){l.m(o,s),N(o,t,s),N(o,n,s),y(n,f)},p(o,s){u===(u=r(o))&&l?l.p(o,s):(l.d(1),l=u(o),l&&(l.c(),l.m(t.parentNode,t))),s&1&&i!==(i=new Date(o[13].time).toLocaleString()+"")&&P(f,i)},d(o){o&&(W(t),W(n)),l.d(o)}}}function rt(e){let t;return{c(){t=$("div"),t.textContent="Загрузка данных ...",M(t,"class","loading-data")},m(n,i){N(n,t,i)},p:L,d(n){n&&W(t)}}}function at(e){let t,n=e[13].data.full_name+"",i,f,r,u=X(e[13].data.addresses),l=[];for(let o=0;o<u.length;o+=1)l[o]=ge(pe(e,u,o));return{c(){t=$("div"),i=F(n),f=z(),r=$("div");for(let o=0;o<l.length;o+=1)l[o].c();M(t,"class","full-name"),M(r,"class","addresses")},m(o,s){N(o,t,s),y(t,i),N(o,f,s),N(o,r,s);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,null)},p(o,s){if(s&1&&n!==(n=o[13].data.full_name+"")&&P(i,n),s&1){u=X(o[13].data.addresses);let a;for(a=0;a<u.length;a+=1){const p=pe(o,u,a);l[a]?l[a].p(p,s):(l[a]=ge(p),l[a].c(),l[a].m(r,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=u.length}},d(o){o&&(W(t),W(f),W(r)),Ae(l,o)}}}function ct(e){let t;return{c(){t=$("div"),t.textContent="Неизвестный абонент",M(t,"class","empty-data")},m(n,i){N(n,t,i)},p:L,d(n){n&&W(t)}}}function ge(e){let t,n,i=e[16].title+"",f,r,u,l,o=e[16].data+"",s,a;return{c(){t=$("div"),n=$("span"),f=F(i),r=F(":"),u=z(),l=$("span"),s=F(o),a=z(),M(n,"class","address-title"),M(l,"class","address-data"),M(t,"class","address")},m(p,m){N(p,t,m),y(t,n),y(n,f),y(n,r),y(t,u),y(t,l),y(l,s),y(t,a)},p(p,m){m&1&&i!==(i=p[16].title+"")&&P(f,i),m&1&&o!==(o=p[16].data+"")&&P(s,o)},d(p){p&&W(t)}}}function me(e,t){let n,i,f=t[13].status+"",r,u,l,o,s=t[13].phone+"",a,p,m,v,d,_,g,w,E;function x(c,h){return c[13].data===null?rt:st}let S=x(t),k=S(t);function b(){return t[6](t[13])}return{key:e,first:null,c(){n=$("div"),i=$("div"),r=F(f),u=z(),l=$("div"),o=$("div"),a=F(s),p=z(),k.c(),m=z(),v=$("div"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hydra-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 19a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M18 5a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M10 5a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M6 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M18 19a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M14 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M22 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"></path><path d="M6 12h4"></path><path d="M14 12h4"></path><path d="M15 7l-2 3"></path><path d="M9 7l2 3"></path><path d="M11 14l-2 3"></path><path d="M13 14l2 3"></path></svg>',d=z(),M(i,"class","action-type"),M(o,"class","phone"),M(l,"class","action-body"),M(v,"class","call-hydra"),M(v,"title","Открыть в Гидре"),M(v,"role","button"),M(v,"tabindex","0"),M(n,"class","action-item"),j(n,"welcome",t[13].action==="welcome"),j(n,"calling",t[13].action==="calling"),j(n,"answered",t[13].action==="answered"),this.first=n},m(c,h){N(c,n,h),y(n,i),y(i,r),y(n,u),y(n,l),y(l,o),y(o,a),y(l,p),k.m(l,null),y(n,m),y(n,v),y(n,d),g=!0,w||(E=[H(v,"keypress",pt),H(v,"click",b)],w=!0)},p(c,h){t=c,(!g||h&1)&&f!==(f=t[13].status+"")&&P(r,f),(!g||h&1)&&s!==(s=t[13].phone+"")&&P(a,s),S===(S=x(t))&&k?k.p(t,h):(k.d(1),k=S(t),k&&(k.c(),k.m(l,null))),(!g||h&1)&&j(n,"welcome",t[13].action==="welcome"),(!g||h&1)&&j(n,"calling",t[13].action==="calling"),(!g||h&1)&&j(n,"answered",t[13].action==="answered")},i(c){g||(c&&T(()=>{g&&(_||(_=fe(n,de,{duration:200,axis:"y"},!0)),_.run(1))}),g=!0)},o(c){c&&(_||(_=fe(n,de,{duration:200,axis:"y"},!1)),_.run(0)),g=!1},d(c){c&&W(n),k.d(),c&&_&&_.end(),w=!1,A(E)}}}function ut(e){let t,n,i,f,r,u,l,o,s,a,p,m,v,d,_=[],g=new Map,w,E,x,S=X(e[0]);const k=c=>c[13].event_id;for(let c=0;c<S.length;c+=1){let h=he(e,S,c),C=k(h);g.set(C,_[c]=me(C,h))}let b=null;return S.length||(b=_e()),{c(){t=$("div"),n=$("h1"),n.textContent="Активные события",i=z(),f=$("div"),r=$("button"),r.textContent="Тест",u=z(),l=$("select"),o=$("option"),o.textContent="welcome",s=$("option"),s.textContent="calling",a=$("option"),a.textContent="answered",p=z(),m=$("hr"),v=z(),d=$("div");for(let c=0;c<_.length;c+=1)_[c].c();b&&b.c(),o.__value="welcome",Z(o,o.__value),o.selected=!0,s.__value="calling",Z(s,s.__value),a.__value="answered",Z(a,a.__value),e[1]===void 0&&T(()=>e[4].call(l)),M(f,"class","test"),M(d,"class","action-field"),M(t,"class","app-container svelte-3c9jg1")},m(c,h){N(c,t,h),y(t,n),y(t,i),y(t,f),y(f,r),y(f,u),y(f,l),y(l,o),y(l,s),y(l,a),re(l,e[1],!0),y(t,p),y(t,m),y(t,v),y(t,d);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m(d,null);b&&b.m(d,null),w=!0,E||(x=[H(r,"click",e[3]),H(l,"change",e[4]),H(l,"change",e[5])],E=!0)},p(c,[h]){h&2&&re(l,c[1]),h&1&&(S=X(c[0]),Ge(),_=Ye(_,h,k,1,c,S,g,d,Xe,me,null,he),Ke(),!S.length&&b?b.p(c,h):S.length?b&&(b.d(1),b=null):(b=_e(),b.c(),b.m(d,null)))},i(c){if(!w){for(let h=0;h<S.length;h+=1)oe(_[h]);w=!0}},o(c){for(let h=0;h<_.length;h+=1)ke(_[h]);w=!1},d(c){c&&W(t);for(let h=0;h<_.length;h+=1)_[h].d();b&&b.d(),E=!1,A(x)}}}function ft(e){Alert.info("WS-сервер подключился.","Соединение установлено.",10)}function dt(e){console.log("WS error: ",e)}function ht(e){!e.data||e.data.profile_url===void 0||window.open(e.data.profile_url,"_blank")}const pt=()=>{};function _t(e,t,n){let i=null;const f="ws:"+window.location.host+"/ws";let r=[],u="welcome";const l={phone:"+79217809021",action:"welcome",status:"toSupport",time:new Date,event_id:"1729243964.366",support_id:"501",data:{login:"user",phone:"+79217809021",profile_url:"https://www.google.com/",full_name:"Вася Пупкин",short_name:"Пупкин В.",created_date:"2021-01-01 12:00:00",firm_id:0,addresses:[{title:"Основной адрес",data:"г. Москва, ул. Льва Толстого, д. 16"},{title:"Для связи",data:"+7 (495) 123-45-67"}]}};function o(){n(0,r=[l])}function s({data:g}){const w=JSON.parse(g);console.log("WS message: ",w),n(0,r=w)}function a(g){Alert.warning("WS-сервер закрыл соединение.<br>Пытаюсь переподключиться ...","Соединение закрыто."),m()}function p(){(!i||i.readyState==WebSocket.CLOSED)&&(i=new WebSocket(f),i.onopen=ft,i.onmessage=s,i.onclose=a,i.onerror=dt)}function m(){i=null;try{p()}catch(g){console.log(g)}}Te(()=>{m()});function v(){u=Le(this),n(1,u)}return[r,u,l,o,v,()=>{n(2,l.action=u,l)},g=>ht(g)]}class gt extends lt{constructor(t){super(),nt(this,t,_t,ut,Ee,{})}}new gt({target:document.getElementById("app")});
